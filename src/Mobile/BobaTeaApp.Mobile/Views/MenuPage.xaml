<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BobaTeaApp.Mobile.Views.MenuPage"
             Title="Menu">
    <CollectionView ItemsSource="{Binding Categories}">
        <CollectionView.ItemTemplate>
            <DataTemplate>
                <VerticalStackLayout Padding="16" Spacing="8">
                    <Label Text="{Binding Name}" FontAttributes="Bold" FontSize="20" />
                    <Label Text="{Binding Description}" FontSize="14" />
                    <CollectionView ItemsSource="{Binding Products}" SelectionMode="None">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame Padding="12" CornerRadius="18" BackgroundColor="White" Shadow="Small">
                                    <Grid ColumnDefinitions="Auto,*">
                                        <Image Source="{Binding ImageUrl}" WidthRequest="72" HeightRequest="72" Aspect="AspectFill" />
                                        <VerticalStackLayout Grid.Column="1" Padding="12,0" Spacing="4">
                                            <Label Text="{Binding Name}" FontAttributes="Bold" />
                                            <Label Text="{Binding Description}" FontSize="13" />
                                            <Label Text="{Binding BasePrice, StringFormat='${0:F2}'}" FontAttributes="Bold" />
                                            <Button Text="Add" Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.AddToCartCommand}" CommandParameter="{Binding .}" />
                                        </VerticalStackLayout>
                                    </Grid>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>
</ContentPage>
